<!DOCTYPE html>
<html lang="en">
  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="Piotr Kosmowski">
	<link rel="shortcut icon" href="favicon.ico">

	<title>Piotr Kosmowski page</title>

	<!-- Fonts -->
	<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C700" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">

	<!-- Bootstrap core CSS -->
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/font-awesome.min.css" rel="stylesheet">
	<link href="/css/bootstrap-social.css" rel="stylesheet">

	<!-- Styles -->
	<link href="/css/main.css" rel="stylesheet">

	<!-- Loading bar -->
	<script src="/js/jquery-1.10.2.min.js"></script>
	<script src="/js/jquery.stoc.js"></script>
	

	
	<!-- HTML5 shiv for IE8 support -->
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<![endif]-->
  </head>

  <body>
	

	<section id="sidebar" class="col-sm-3 sidebar" style="display: inline-block;">
<header id="header">
	<a href="/">
	<img src="http://www.gravatar.com/avatar/a4e3f3d974bfdd573f2bb607617b82c1.png" alt="Piotr Kosmowski" id="gravatar"/>
	<p id="author-full-name">Piotr Kosmowski</p>
	<p id="slogan">Hi, I'm Piotr and I write code for food.</p>
</a>
</header>
<nav id="navigation">
	<div class="row">
		<a href="http://twitter.com/kospiotr" class="btn btn-default">Twitter</a>
		<a href="http://pl.linkedin.com/pub/piotr-kosmowski/25/379/467" class="btn btn-default">LinkedIn</a>
		<a href="/blog" class="btn btn-default">Blog</a>
	</div>
	<div class="row">	
		<a href="http://github.com/kospiotr" class="btn btn-default">Github</a>
		<a href="/wiki" class="btn btn-default">Wiki</a>
	</div>
</nav>
	</section>

	<section id="main" class="col-sm-9">
		<div id="main-container">
<article id="main-article">
	<header id="header">
		<nav id="nav">
			
				<a href="/2014/01/12/first-post.html" title="Older: First post" class="btn btn-default">←</a>
			
				<a href="/blog" class="btn btn-default">Blog posts</a>
			
				<a href="/2014/02/02/gwt-and-guice.html" title="Newer: Google Web Toolkit + Guice" class="btn btn-default">→</a>
			
		</nav>
		<h1 id="page-title">Google Web Toolkit</h1>
		
			<h2 id="page-description">
				Opis i podstawowe elementy (in Polish)
			</h2>
		
		<h3> 01 Feb 2014</h3>
	</header>
	<div id="article-body" class="markdown-body">

<p>Google Web Toolkit (GWT) jest szkieletem do tworzenia aplikacji AJAX w oparciu o język Java. Pozwala on na tworzenie kodu bez ręcznego kodowania i łączenia elementów języka Java oraz JavaScript. Po napisaniu kodu aplikacji następuje kompilacja części klienckiej do JavaScriptu, CSS oraz HTML. Część serwerowa zostaje skompilowana przez standardowy kompilator Javy. Framework w standardzie zapewnia poprawne wyświetlanie komponentów w przeglądarkach: Firefox, Opera, IE, Safari, Google Chrome. (Wikipedia.pl)</p>

<p>W skrócie GWT jest frameworkiem, który pozwala na tworzenie aplikacji typu RIA w całości w języku Java. Projekt GWT składa się z części klienckiej i serwerowej. Część kliencka umieszczona jest w odpowiedniej paczce (zazwyczaj client) i podczas kompilacji jest konwertowana za pomocą kompilatora skrośnego do postaci Java Scriptu – formy obsługiwanej natywnie przez przeglądarki internetowe.
Podczas ładowania strony to właśnie część kliencka ładowana jest w całości do pamięci przeglądarki. Dzięki temu każde przejście pomiędzy kolejnymi stronami czy interakcja z komponentami – widgetami nie musi oznaczać przeładowania całej strony. Dzięki temu, że wygenerowany i zoptymalizowany! kod Java Script operuje na elementach DOM naszej strony odnosimy wrażenie, że mamy do czynienia niemal z tradycyjną aplikacją desktopową.
Aplikacja nie musi koniecznie znajdować się na serwerze aplikacji Java. Skompilowana część kliencka może zostać umieszczona na dowolnym serwerze. Dzięki możliwości parsowania plików XML czy JSON GWT może komunikować się z dowolnym WebService-m. Natywnie jednak GWT wspiera komunikację poprzez GWT-RPC – mechanizm asynchronicznej komunikacji z częścią serwerową napisaną w języku Java.</p>

<p>To są jedynie podstawowe zalety GWT, których w rzeczywistości jest cała masa. Według nas jest to obecnie jeden z najlepszych frameworków pozwalających na tworzenie aplikacji typu RIA a w tym artykule opiszemy jedynie podstawowe komponenty typowego projektu GWT. Osoby, które chciałyby rozpocząć pracę z GWT zapraszamy na stronę projektu, gdzie znajduje się szczegółowy poradnik jak uruchomić pierwszy projekt. Po nieco przydługawym wstępie przystępujemy do omawiania najważniejszych elementów.</p>

<p>Każda aplikacja GWT ma budowę modułową, dlatego też każda aplikacja musi posiadać moduł główny. Każdy moduł musi składać się przynajmniej z 2 elementów:</p>

<ul>
<li>Deskryptora modułów</li>
<li>Punktu wejścia</li>
</ul>

<p>Deskryptor modułów jest to plik xml znajdujący się w paczce w której znajdować się będą zasoby modułu. Nazwa deskryptora będzie określać nazwę całego modułu, np.: Main.gwt.xml sprawi, że moduł ten będzie nazwyać się Main i zawiera on informacje na temat wykorzystywanych zewnętrznych modułów (np. widgetów)</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="cp">&lt;!DOCTYPE module PUBLIC &quot;-//Google Inc.//DTD Google Web Toolkit 1.7.0//EN&quot; &quot;http://google-web-toolkit.googlecode.com/svn/tags/1.7.0/distro-source/core/src/gwt-module.dtd&quot;&gt;</span>

<span class="nt">&lt;module&gt;</span>
    <span class="nt">&lt;inherits</span> <span class="na">name=</span><span class="s">&quot;com.google.gwt.user.User&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- Inherit the default GWT style sheet. You can change --&gt;</span>
    <span class="c">&lt;!-- the theme of your GWT application by uncommenting --&gt;</span>
    <span class="c">&lt;!-- any one of the following lines. --&gt;</span>
    <span class="c">&lt;!-- &lt;inherits name=&#39;com.google.gwt.user.theme.standard.Standard&#39;/&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;inherits name=&quot;com.google.gwt.user.theme.chrome.Chrome&quot;/&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;inherits name=&quot;com.google.gwt.user.theme.dark.Dark&quot;/&gt; --&gt;</span>

    <span class="nt">&lt;entry-point</span> <span class="na">class=</span><span class="s">&quot;pl.testing.client.MainEntryPoint&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- Do not define servlets here, use web.xml --&gt;</span>
<span class="nt">&lt;/module&gt;</span>
</code></pre></div>
<p>Aby móc wykorzystywać biblioteki zewnętrzne w części klienckiej naszej aplikacji (np dodatkowe widgety) musimy dodać taką bibliotekę do naszego classpatha oraz dodać wpis inherits w deskryptorze modułów np:</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml">    <span class="nt">&lt;inherits</span> <span class="na">name=</span><span class="s">&quot;com.google.gwt.user.User&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Dlaczego nie wystarczy dodać naszej biblioteki do classpatha i po prostu zacząć z nich korzystać? Niestety jest to trochę skomplikowane. Nie dość, że musimy obowiązkowo dodawać dodatkowe wpisy w deskryptorze to jeszcze nie mogą to być dowolne biblioteki. Muszą to być koniecznie skompilowane w specjalny sposób moduły GWT, które kompilator skrośny jest w stanie przetworzyć do Java Scriptu. Niestety pisząc część kliencką jesteśmy ograniczeni do tzw. środowiska emulowanego. Niestety nie wszystko da się skompilować do postaci Java Scriptu, dlatego użytkownicy są ograniczeni do korzystania z jedynie wybranych klas przygotowanych specjalnie przez Google. Gdy korzystamy z klasy Date, albo String w rzeczywistości wykorzystujemy nadpisaną przez Google klasę, która posiada identyczne metody i zachowanie co oryginalna klasa. Różnią się one jednak tym, że te przesłaniające można skompilować do JS. Obecnie wachlarz udostępnionych klas jest naprawdę ogromny i mówi się, że zaemulowane jest niemalże w pełni środowisko znane z Javy 1.4 z wieloma dodatkami nowszych wersji np. Genericki. Niestety największą bolączką i czymś, co będzie bardzo trudne w przeskoczeniu jest refleksja. Niestety JS nie wspiera refleksji przez co dodawanie kolejnych funkcjonalności, które mogą być zawarte w emulowanym środowisku jest niezwykle utrudnione.
Podsumowując aktualny akapit: aby móc wykorzystywać wspierane zewnętrzne biblioteki przez moduł GWT należy dodać ją do Classpatha oraz do deskryptora bieżącego modułu.
Kolejnym ważnym elementem w deskryptorze jest:</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml">    <span class="nt">&lt;entry-point</span> <span class="na">class=</span><span class="s">&quot;pl.testing.client.MainEntryPoint&quot;</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>Jest to tzw. punkt wejścia modułu. Jest to nic innego jak tylko odpowiednik klasy zawierającej metodę public void main(String[] args). Dzięki temu wpisowi podczas uruchamiania wskazanego modułu ładowana jest właśnie klasa pl.testing.client.MainEntryPoint, która musi implementować interfejs EntryPoint i znajdować się w części klienckiej naszego modułu (podfolder client):</p>
<div class="highlight"><pre><code class="java language-java" data-lang="java"><span class="kn">package</span> <span class="n">pl</span><span class="o">.</span><span class="na">testing</span><span class="o">.</span><span class="na">client</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.google.gwt.core.client.EntryPoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.gwt.user.client.ui.Button</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.gwt.user.client.ui.Label</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.gwt.user.client.ui.RootPanel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.gwt.event.dom.client.ClickEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.gwt.event.dom.client.ClickHandler</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Main entry point.</span>
<span class="cm"> *</span>
<span class="cm"> * @author Praca</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainEntryPoint</span> <span class="kd">implements</span> <span class="n">EntryPoint</span> <span class="o">{</span>
    <span class="cm">/** </span>
<span class="cm">     * Creates a new instance of MainEntryPoint</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">MainEntryPoint</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="cm">/** </span>
<span class="cm">     * The entry point method, called automatically by loading a module</span>
<span class="cm">     * that declares an implementing class as an entry-point</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onModuleLoad</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Label</span> <span class="n">label</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Label</span><span class="o">(</span><span class="s">&quot;Hello, GWT!!!&quot;</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Button</span><span class="o">(</span><span class="s">&quot;Click me!&quot;</span><span class="o">);</span>

        <span class="n">button</span><span class="o">.</span><span class="na">addClickHandler</span><span class="o">(</span><span class="k">new</span> <span class="n">ClickHandler</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">ClickEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">label</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(!</span><span class="n">label</span><span class="o">.</span><span class="na">isVisible</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">RootPanel</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">button</span><span class="o">);</span>
        <span class="n">RootPanel</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">label</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Kolejnym podstawowym elementem jest strona ładująca. Jest to strona, która zostanie wczytana przez przeglądarkę i załaduje całą naszą aplikację do pamięci przeglądarki.</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml"><span class="cp">&lt;!doctype html&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">The DOCTYPE declaration above will set the browser&#39;s rendering engine into</span>
<span class="c">&quot;Standards Mode&quot;. Replacing this declaration with a &quot;Quirks Mode&quot; doctype may</span>
<span class="c">lead to some differences in layout.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&#39;gwt:module&#39;</span> <span class="na">content=</span><span class="s">&#39;pl.testing.Main=pl.testing.Main&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;title&gt;</span>Main<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>  <span class="na">src=</span><span class="s">&quot;pl.testing.Main/pl.testing.Main.nocache.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>Najważniejszymi tutaj są:</p>

<p><code>&lt;meta name=’gwt:module’ content=’pl.testing.Main=pl.testing.Main’&gt;</code> – określa główny moduł
<code>&lt;script type=”text/javascript” src=”pl.testing.Main/pl.testing.Main.nocache.js”&amp;gt&lt;/script&gt;</code> – skrypt ładujący skompilowaną aplikację do javy scriptu
Plik konfiguracyjny aplikacji, zawierający na początku jedynie wpis o stronie ładującej aplikację JEE powinien wyglądać mniej więcej tak:</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">version=</span><span class="s">&quot;2.5&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://java.sun.com/xml/ns/javaee&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;session-config&gt;</span>
        <span class="nt">&lt;session-timeout&gt;</span>
            30
        <span class="nt">&lt;/session-timeout&gt;</span>
    <span class="nt">&lt;/session-config&gt;</span>
    <span class="nt">&lt;welcome-file-list&gt;</span>
        <span class="nt">&lt;welcome-file&gt;</span>welcomeGWT.html<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;/welcome-file-list&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div>
<p>W przyszłych wpisach przyjżymy się jemu bliżej a większość konfiguracji związanych z mapowaniem servletów, które muszą znajdować się właśnie w tym pliku przeniesiemy do wygodnego modułu.</p>

<p>Ostatnim elementem, który należy wspomnieć to kompilacja projektu. Aplikację taką można kompilować zarówno za pomocą Anta jak i Mavena. Nie będziemy zagłębiać się tutaj w szczegóły na ten temat, ponieważ większość czynności wykonują za nas IDE wraz z odpowiednimi wtyczkami.</p>

<p>Spragnionych większej dawki wiedzy odsyłam do strony domowej frameworka: http://code.google.com/intl/pl-PL/webtoolkit/ .
W następnej części już szczegółowo zajmiemy się Guice-m oraz Hibernate-m.</p>


	</div>
	<nav id="nav-bottom">
		
			<a href="/2014/01/12/first-post.html" title="Older: First post" class="btn btn-default">←</a>
		
			<a href="/blog" class="btn btn-default">Blog posts</a>
		
			<a href="/2014/02/02/gwt-and-guice.html" title="Newer: Google Web Toolkit + Guice" class="btn btn-default">→</a>
		
	</nav>

	<footer id="comments">
		<header>
			<h1>Comments</h1>
		</header>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
			var disqus_shortname = 'piotr-kosmowski-site'; // required: replace example with your forum shortname

			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	</footer>

</article>
﻿<footer class="footer">
	<p>© Piotr Kosmowski. All right reserved. </p>
</footer>
		</div>
	</section>
  </body>
</html>